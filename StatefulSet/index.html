<!doctype html>
<html lang="en">

<head>
        <title>StatefulSet - Kubernetes Grundlagen</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        
        
        

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
        <link rel="stylesheet" href="../assets/css/dracula-ui.css">
        <link rel="stylesheet" href="../assets/css/mkdocs.css">

        
            <link  rel="icon" type="image/x-icon" href="../assets/img/favicon.ico">
        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
                <script>hljs.initHighlightingOnLoad();</script>

</head>

<body class="drac-bg-black-secondary drac-text-grey-ternary drac-text drac-scrollbar-purple">

    <main class="d-flex">

        <!-- block sidebar -->
            <nav id="sidebar" class="sidebar drac-bg-black">
    <div class="custom-menu">
        <button type="button" id="sidebarCollapse" class="btn btn-primary">
            <i class="fa fa-bars"></i>
            <span class="sr-only">Menu</span>
        </button>
    </div>

    <div class="p-4">
        

        <div class="drac-text-center">
            
                <span class="drac-text drac-line-height drac-text-white">Kubernetes Grundlagen</span>
            
        </div>

        <div class="drac-box flex-column">
            <ul class="dot-ul">
                <li><div class="dot-li drac-bg-cyan"></div></li>
                <li><div class="dot-li drac-bg-green"></div></li>
                <li><div class="dot-li drac-bg-orange"></div></li>
                <li><div class="dot-li drac-bg-pink"></div></li>
                <li><div class="dot-li drac-bg-purple"></div></li>
                <li><div class="dot-li drac-bg-red"></div></li>
                <li><div class="dot-li drac-bg-yellow"></div></li>
            </ul>
        </div>

        <hr class="drac-divider" />

        <!-- block menu -->
        <ul class="mb-5 drac-list drac-list-none">
            
            <li class="drac-box">
                <a href=".."
                    class="
                    drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
                    Home
                </a>
            </li>
            <li class="drac-box">
                <a href="../Namespace/"
                    class="
                    drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
                    Namespace
                </a>
            </li>
            <li class="drac-box">
                <a href="../Deployment/"
                    class="
                    drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
                    Deployment
                </a>
            </li>
            <li class="drac-box">
                <a href="./"
                    class=" active 
                    drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
                    StatefulSet
                </a>
            </li>
            <li class="drac-box">
                <a href="../DaemonSet/"
                    class="
                    drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
                    DaemonSet
                </a>
            </li>
            <li class="drac-box">
                <a href="../Job/"
                    class="
                    drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
                    Job
                </a>
            </li>
            <li class="drac-box">
                <a href="../Rancher/"
                    class="
                    drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
                    Rancher
                </a>
            </li>
            <li class="drac-box">
                <a href="../Project/"
                    class="
                    drac-anchor d-inline-flex align-items-center border-0 drac-text-purple--hover">
                    Project
                </a>
            </li>
        </ul>
        <!-- endblock -->
    </div>
</nav>
        <!-- endblock -->

        <nav class="divider drac-bg-purple-cyan"></nav>

        <div class="content">
            <!-- block header -->
                <header>
    <nav class="navbar navbar-expand-xl drac-bg-purple"">
        <div class="container-fluid">

            <!-- <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsMenu"
                aria-controls="navbarsMenu" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button> -->

            <div class="collapse navbar-collapse flex-column ml-auto" id="navbarsMenu">
                <ul class="navbar-nav">

                    <!-- block preview -->
                    <li class="nav-item">
                            
        <div class="container">
            <div class="row row-preview">
                <div class="col">
                    <a href="../Deployment/"
                        class="btn-preview drac-btn drac-btn-outline drac-text-white drac-text-cyan-green--hover">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </div>
                <div class="col">
                    <a href="../DaemonSet/"
                        class="btn-preview drac-btn drac-btn-outline drac-text-white drac-text-cyan-green--hover" style="padding-left: 3%;">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </div>
            </div>
        </div>
                    </li>
                    <!--  endblock -->

                    <!-- block search -->
                    <li class="nav-item">
                    </li>
                    <!--  endblock -->

                    <!-- block source -->
                    <li class="nav-item">
                        
                    </li>
                    <!--  endblock -->

                </ul>
            </div>

        </div>
    </nav>
</header>
            <!-- endblock -->

            <!-- block content -->
                <section class="p-md-5 section-content">
    <article>
        <p><h1 id="statefulsets">StatefulSets</h1>
<h2 id="ubung">Übung</h2>
<ol>
<li>
<p>Öffne die CMD.exe</p>
</li>
<li>
<p>Gib nun folgenden Befehl ein <code>kubectl config current-context</code>. Du solltest nun die Antwort <em>rancher-desktop</em> sehen</p>
</li>
<li>
<p>Das StatefulSet erstellen wir nun mittels Helm Chart. Helm ist ein nützliches Tool welches dir ermöglicht Applikation komplett und anpassbar zu deployen. Später mehr dazu.</p>
</li>
<li>
<p><code>helm install uebung-03 oci://registry-1.docker.io/bitnamicharts/mariadb</code></p>
</li>
<li>
<p>Sieh dir nun in Ruhe an, was alles erstellt wurde.</p>
</li>
<li>
<p>Erstelle nun eine kleine Tabelle in der Datenbank</p>
</li>
</ol>
<p>6.1 Beim Erstellen mittels Kommando hast du mitgeteilt bekommen, wie du den Test-Client installieren kannst.
       Das Root-Passwort ist als Secret unter Storage zu finden in Rancher Desktop. Beispiel SQL Statements, welche man innerhalb des Clients verwenden kann um Tabellen zu erzeugen etc. findest du unter SQL-Queries</p>
<ol>
<li>
<p>Gehe nun in den Reiter für StatefulSets im Rancher Desktop und stelle im mariadb StatefulSet die Replikas auf 0. Der Pod sollte nun entfernt werden.</p>
</li>
<li>
<p>Stelle die Replikas nun wieder auf 1 und warte bis der Pod wieder auf Running. Was fällt dir auf? Sind deine Daten noch da?</p>
</li>
<li>
<p>Stelle nun die Replikas auf 2 und führe Schritt 6.1 mehrfach nacheinander durch. Was fällt dir auf?</p>
</li>
</ol>
<h2 id="best-practice">Best Practice:</h2>
<blockquote>
<p>Das StatefulSet ähnelt sich dem Deployment bei der Betrachtung des Funktionsumfang. Wenn jedoch eine permanente, statische Netzwerkidentität sowie eine stabile und persistente Storage Anbindung, welche auch Skalierung „überlebt“, erforderlich sind, wird ein StatefulSet empfohlen. </p>
<p>Bei sehr großen Clustern mit vielen ConfigMaps mit statischen Werten, können Immutable ConfigMaps (einmal definiert, unveränderlich danach) die Performance (API-Server Entlastung) und Sicherheit (Human Error) erhöhen. Wird jedoch die ConfigMap durch Löschen und Neuerstellen „bearbeitet“ müssen die konsumierenden Pods neuerstellt werden, da diese auf alte Mountpoints verweisen.</p>
</blockquote>
<h2 id="sql-queries">SQL-Queries</h2>
<p>Erstellung der Tabelle Personal:</p>
<p><code>create table Personal ( PersonalID int, Name varchar(255), VorName varchar(255), Addresse varchar(255) );</code></p>
<p>Füge eine Beispiel Person der Tabelle hinzu:</p>
<p><code>insert into Personal (PersonalID, Name, VorName, Addresse) values (1, 'Mueller', 'Melanie', 'Am Bauhof 9');</code></p>
<p>Zeige alle Zeilen von Personal an:</p>
<p><code>select * from Personal;</code></p></p>
    </article>
</section>
            <!-- endblock -->

            <!-- block footer -->
                <footer>
    <div class="d-flex flex-sm-row justify-content-between py-2 border-top drac-text-black drac-bg-cyan-green">
        <a href="https://github.com/dracula/mkdocs" target="_blank" style="padding-left: 1%;"
            class="footer-text drac-anchor drac-text-black drac-text-purple--hover">
            Made with Dracula Theme for MkDocs
        </a>
    </div>
</footer>
            <!-- endblock -->
        </div>

    </main>

        <script>var base_url = '..';</script>
        <script src="../assets/js/jquery-3.3.1.slim.min.js""></script>
        <script src="../assets/js/bootstrap.bundle.min.js""></script>
        <script src="../assets/js/mkdocs.js""></script>

</body>

</html>
